<!DOCTYPE html>
<html>
	<head>
		<%- include('content/ejs/head.ejs', {title: "Livestream"}) %>
	</head>
	<body>
		<nav>
			<%- include('content/ejs/banner.ejs') %>
		</nav>

		<main>
			<%- include('content/ejs/body.ejs') %>		

			<div class="container">
				<div class="video-contents">
					<div class="video-container">
						<div id="loading"></div>
						<video id="video" controls=""></video>
					</div>
					<h1><%= stream.name %></h1>
					<p>RTMP Server: <%= rtmpServer %></p>
					<p>Stream Key: <%= streamKey %></p>
					<p>Stream ID: <%= stream.id %></p>
					<a href="http://localhost/l/view/<%= stream.id %>">Link to viewer end of stream.</a>
				</div>
				<%- include('content/ejs/livechat.ejs', {stream: stream, user: user}) %>
			</div>

			<%- include('content/ejs/bottombody.ejs') %>

			<%- include('content/ejs/scripts.ejs') %>

			<script>
				<% if (typeof user != 'undefined') { %>
					var user_id = <%- JSON.stringify(user.id) %>;
					var username = <%- JSON.stringify(user.username) %>;
					var channelicon = <%- JSON.stringify(user.channelicon) %>;
				<% } %>
				var enableChat = <%- JSON.stringify(stream.enablechat) %>;
				var streamURL = <%- JSON.stringify(streamURL) %>;
				var streamid = <%- JSON.stringify(stream.id) %>;
				var isStreamer = true;
			</script>

			<script src="/content/javascript/livechat.js"></script>

			<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

			<script src="/content/javascript/obsStreamAdmin.js"></script>
		</main>
	</body>
</html>
