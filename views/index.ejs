<!DOCTYPE html>
<html>
	<head>
		<%- include('content/html/head.html') %>
		<title>Home - Crumb</title>
	</head>
	<body>
		<%- include('content/html/banner.html') %>

		<div class="messages">
			<% if (typeof message != 'undefined') { %>
				<p><%= message %></p>
			<% } %>

			<ul>
				<% if (typeof errors != 'undefined') { %>
					<% errors.forEach((item, index) => { %>
						<li><%= item.message %></li>
					<% }); %>
				<% } %>
			</ul>
		</div>

		<% if (typeof user != 'undefined') { %>
			<% var channellink = `/u/${user.id}`; %>
			<button><a href="<%= channellink %>">My Channel</a></button><br>
			<button><a href="/v/submit">Submit a Video</a></button><br>
			<button><a href="/logout">Log Out</a></button>
		<% } else { %>
			<button><a href="/login">Login</a></button><br>
			<button><a href="/register">Register</a></button>
		<% } %>

		<h1>Videos:</h1>
		<div class="home-videos">
			<% if (typeof videos != 'undefined') { %>
				<% videos.forEach((item, index) => { %>
					<div class="video">
						<% var creator = JSON.parse(item.creator) %>
						<% var videolink = `/v/${item.id}` %>
						<% var channellink = `/u/${creator.id}` %>
						<div class="thumbnail">
							<a href="<%= videolink %>">
								<img src="<%= item.thumbnail %>" alt="Thumbnail" width="450" height="300">
							</a>
						</div>
						<div class="links">
							<a href="<%= videolink %>">
								<h3 style="text-transform: capitalize"><strong><%= item.title %></strong></h3>
							</a>
							<div id="channel-links">
								<a href="<%= channellink %>">
									<img id="channel-icon" src="<%= creator.channelicon %>">
								</a>
								<a href="<%= channellink %>">
									<p><%= creator.username %></p>
								</a>
							</div>
						</div>
					</div>
				<% }); %>
			<% } %>
		</div>
	</body>
</html>
